{"code":"!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=4)}([function(e,t){e.exports=require(\"@tonaljs/midi\")},function(e,t){e.exports=require(\"animejs/lib/anime.es\")},function(e,t){e.exports=require(\"tone\")},function(e,t){e.exports=require(\"redis\")},function(e,t,n){\"use strict\";n.r(t);var o=n(1),r=n.n(o);var s={randomColorRGB:function(e,t,n){return`rgb(${Math.floor(256*Math.random())||e}, ${Math.floor(256*Math.random())||t}%, ${Math.floor(256*Math.random())||n}%)`},randomColorHSL:function(e,t,n){return`hsl(${Math.floor(256*Math.random())||e}, ${Math.floor(101*Math.random())||_sat}%, ${Math.floor(101*Math.random())||n}%)`},getNextColor:function(){const e=document.getElementById(\"pressed-color\").value;return\"random\"!==e?\"#\"+e:this.randomColorHSL()}},l=n(0);const i=document.getElementById(\"noteName\"),a=document.getElementById(\"visualizer\"),c=[];let u=null;const d={handleEvent:(e,t)=>(function(e,t){if(144===t[0]){const t=document.createElement(\"div\");if(t.style.display=\"inline-block\",t.style.position=\"absolute\",t.style.backgroundColor=\"blue\",t.style.height=\"auto\",t.style.top=a.getBoundingClientRect().height+\"px\",t.style.bottom=0,t.classList.add(\"currentlyPressed\"),t.classList.add(Object(l.midiToNoteName)(e.id)),\"white\"===e.className.baseVal){const o=document.getElementById(\"21\").getBoundingClientRect().width,r=[\"C\",\"D\",\"E\",\"F\",\"G\",\"A\",\"B\"],s=Object(l.midiToNoteName)(e.id);function n(){if(\"A0\"===s)return 0;if(\"B0\"===s)return 1.25*o;const e=s[0],t=s[1];let n=r.indexOf(e)*o+7*(t-1)*o+2*o;return[\"A\",\"B\",\"D\",\"E\",\"G\"].includes(e)&&(n+=o/4),n}const i=n();t.style.left=i+\"px\";let a=o;\"C8\"===s||(\"A0\"===s?a-=o/4:[\"B\",\"C\",\"E\",\"F\"].includes(s[0])?a-=o/4:a-=o/2),t.style.width=a+\"px\"}else{const o=document.getElementById(\"22\").getBoundingClientRect().width,r=Object(l.midiToNoteName)(e.id);function n(e){if(\"Bb0\"===e)return 1.5*o;if(\"Db1\"===e)return 5.5*o;if(\"Eb1\"===e)return 7.5*o;if(\"Gb1\"===e)return 11.5*o;if(\"Ab1\"===e)return 13.5*o;{let t=e[2];return\"B\"===e[0]&&t++,e=[\"D\",\"E\",\"G\",\"A\"].includes(e[0])?e[0]+e[1]+\"1\":e[0]+e[1]+\"0\",n(e)+14*parseInt(t-1,10)*o}}const s=n(r);t.style.left=s+\"px\",t.style.width=o+\"px\"}a.appendChild(t),c.push(Object(l.midiToNoteName)(e.id))}else if(128===t[0]){const t=a.querySelectorAll(`.currentlyPressed, .${Object(l.midiToNoteName)(e.id)}`);for(var o=0;o<t.length;o++)t[o].className.split(\" \").includes(\"currentlyPressed\")&&t[o].className.split(\" \").includes(Object(l.midiToNoteName)(e.id))&&t[o].classList.remove(\"currentlyPressed\");for(o=0;o<c.length;o++)if(c[o]===Object(l.midiToNoteName)(e.id)){c.splice(o,1);break}}i.innerHTML=c.join(\", \")||\"-\"})(e,t),start:()=>void(u=setInterval((function(){for(let e=0;e<a.children.length;e++){const t=a.children[e];let n=parseInt(t.style.top),o=parseInt(t.style.bottom);n>0&&n--,t.classList.contains(\"currentlyPressed\")||o++,t.style.top=n+\"px\",t.style.bottom=o+\"px\",parseInt(t.style.bottom,10)>=a.getBoundingClientRect().height&&t.remove()}}),10)),stop:()=>void clearInterval(u)};let f=null;const m=(e,t)=>{const n=document.getElementById(\"pressed-color\").value;e.style.fill=\"random\"!==n?\"#\"+n:s.randomColorHSL();try{d.handleEvent(e,t)}catch(e){console.log(e)}},y=(e,t)=>{\"white\"===e.className.baseVal?e.style.fill=\"white\":e.style.fill=\"black\";try{d.handleEvent(e,t)}catch(e){console.log(e)}};function p(e){Array.isArray(e)||(e=e.data);const t=e[0],n=e[1],o=document.getElementById(n+\"\");switch(t){case 144:m(o,e);break;case 128:y(o,e)}}function g(e){f=e,e.inputs.forEach((function(e){e.onmidimessage=p})),console.log(\"Obtained permission for MIDI access!\")}const h=e=>{console.log(\"Failed to get MIDI access - \"+e)};var b={setupKeys:()=>{document.getElementById(\"noteName\");const e=[];for(var t=21;t<=108;t++){const n=document.getElementById(t+\"\");n.onmouseenter=()=>{n.style.fill=s.getNextColor(),p([144,n.id,127])},n.onmouseleave=()=>{n.style.fill=n.classList.contains(\"white\")?\"white\":\"black\",p([128,n.id,0])},e.push(n),n.style.opacity=0,n.style.cursor=\"pointer\"}return e},animatePageLoad(e=null){r()({targets:\"#logo svg path\",strokeDashoffset:[r.a.setDashoffset,0],easing:\"easeInOutSine\",duration:1e3,delay:0}),r()({targets:\"#logo svg path\",\"fill-opacity\":1,easing:\"easeInOutSine\",duration:1e3,delay:0});const t=Array.from(document.querySelectorAll(\".white, .black\")).sort((function(e,t){return parseInt(e.id,10)-parseInt(t.id,10)}));r()({targets:t,opacity:1,delay:0,easing:\"easeInOutSine\",complete:e})}};const v=n(2);new v.PolySynth(4,v.Synth).toMaster();v.context.lookAhead=0,b.setupKeys(),b.animatePageLoad((function(){console.log(\"requesting midi access...\"),navigator.requestMIDIAccess({sysex:!0}).then(g,h),d.start()})),console.log(\"init done\");const I=n(3).createClient(6379,\"159.203.179.131\",{password:\"ChaMpvR8lXlVOCy0ZYDGTkg3WzG43zD7CD1xR66xhf/6jy9SLHUv9G6uXy64MW6gORsiQ1QcdIUTAvzt\"});console.log(I.get(\"home\"))}]);","extractedComments":[]}